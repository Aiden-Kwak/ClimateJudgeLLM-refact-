## Project Folder Structure

```bash
.
├── controller
│   └── main_controller.py
├── judge_input.json
├── judge_verdict.txt
├── jury_results.json
├── model
│   ├── data_models.py
│   └── llm_model.py
├── reply_brief
│   ├── lawyer_reply_brief.txt
│   └── prosecutor_reply_brief.txt
├── results # Automatically generated
│   ├── lawyer_results.txt
│   └── prosecutor_results.txt
├── rscFiles
│   └── Files(pdfs)
├── rscFilesIndex # Automatically generated by rscFiles
│   ├── faiss_index.bin
│   └── metadata.json
├── runs.py # Entry point
├── service
│   ├── __pycache__
│   ├── base_agent.py
│   ├── judge_service.py
│   ├── jury_service.py
│   ├── lawyer_service.py
│   ├── prompt_builders
│   ├── prosecutor_service.py
│   ├── qa_service.py
│   └── rag_service.py
└── view
    ├── console_view.py
    └── file_view.py
```

## UML
<img src="docs/llm_puml.png" width="900px">

## Execution flow

```mermaid

sequenceDiagram
    participant User
    participant MainController
    participant ConsoleView
    participant QAService
    participant RagIndexService
    participant JuryService
    participant LawyerService
    participant ProsecutorService
    participant JudgeService
    participant FileView

    User->>MainController: run(claim, data_folder)
    MainController->>ConsoleView: print_info
    MainController->>QAService: generate_questions(claim)
    QAService-->>MainController: questions

    MainController->>ConsoleView: print_info
    MainController->>RagIndexService: embed_resources(data_folder)
    RagIndexService-->>MainController: resource

    MainController->>ConsoleView: print_info
    MainController->>JuryService: evaluate(questions, resource, claim)
    JuryService-->>MainController: jury_results
    MainController->>FileView: write_json

    MainController->>ConsoleView: print_info
    MainController->>LawyerService: analyze
    LawyerService-->>MainController: lawyer_text
    MainController->>FileView: write_text

    MainController->>ConsoleView: print_info
    MainController->>ProsecutorService: analyze
    ProsecutorService-->>MainController: prosecutor_text
    MainController->>FileView: write_text

    MainController->>ConsoleView: print_info
    MainController->>ProsecutorService: reply_brief
    ProsecutorService-->>MainController: prosecutor_reply
    MainController->>FileView: write_text

    MainController->>ConsoleView: print_info
    MainController->>LawyerService: reply_brief
    LawyerService-->>MainController: lawyer_reply
    MainController->>FileView: write_text

    MainController->>ConsoleView: print_info
    MainController->>JudgeService: prepare_input
    JudgeService-->>MainController: judge_input
    MainController->>FileView: write_json

    MainController->>JudgeService: decide
    JudgeService-->>MainController: verdict
    MainController->>FileView: write_text
```